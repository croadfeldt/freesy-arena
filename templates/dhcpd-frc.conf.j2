# DHCP Server Configuration File (Generated by Ansible Playbook)

# This configuration is automatically generated based on provided team numbers.

authoritative;
default-lease-time 600;
max-lease-time 7200;
log-facility local7;

# Define the local DNS server address (same as the router/gateway IP)
# Assumes your router IP ends in the `ip_last_octet` defined in the playbook vars (e.g., .4)
option domain-name-servers {{ subnets_details[0]['router'] }}; 

{% for subnet in subnets_details %}
# Configuration for {{ vlan_configs[loop.index0].name }} (VLAN {{ vlan_configs[loop.index0].id }})
subnet {{ subnet['network'] }} netmask 255.255.255.0 {
  range {{ subnet['range_start'] }} {{ subnet['range_end'] }};
  option routers {{ subnet['router'] }};
  # Example domain name provided by DHCP to clients
  option domain-name "vlan{{ vlan_configs[loop.index0].id }}.local";
}

{% endfor %}
