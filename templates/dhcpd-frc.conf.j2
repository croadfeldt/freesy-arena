# Custom DHCP Configuration for FRC Teams

authoritative;

# DHCP options for each subnet
{% for vlan, subnet in combined_config_data %}
{# Explicitly check for valid data within the loop. The "omit" or "ansibleundefined" values must be caught here. #}
{% if subnet is defined and subnet is not omitted and subnet != '' %}
# Subnet configuration for VLAN {{ vlan.id }} ({{ vlan.name }})
subnet {{ subnet.subnet_cidr | ansible.utils.ipaddr('network') }} netmask {{ subnet.netmask }} {
    option routers {{ subnet.gateway }};
    option subnet-mask {{ subnet.netmask }};
    option broadcast-address {{ subnet.broadcast_ip }};
    range {{ subnet.first_assignable_ip }} {{ subnet.last_assignable_ip }};
}
{% endif %}
{% endfor %}
