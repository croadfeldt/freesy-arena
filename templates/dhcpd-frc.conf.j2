# Custom DHCP Configuration for FRC Teams

authoritative;

# DHCP options for each subnet
{% for vlan, subnet in combined_config_data %}
{# Safety check for undefined values #}
{% if subnet is not ansibleundefined and subnet is not omitted %}
# Subnet configuration for VLAN {{ vlan.id }} ({{ vlan.name }})
subnet {{ subnet.subnet_cidr | ansible.utils.ipaddr('network') }} netmask {{ subnet.netmask }} {
    option routers {{ subnet.gateway }};
    option subnet-mask {{ subnet.netmask }};
    option broadcast-address {{ subnet.broadcast_ip }};
    range {{ subnet.first_assignable_ip }} {{ subnet.last_assignable_ip }};
}
{% endif %}
{% endfor %}
